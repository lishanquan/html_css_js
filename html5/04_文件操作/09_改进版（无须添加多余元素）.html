<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title></title>
  <!--
    上面这个例子需要额外创建一个文本链接，然后点击该文本链接才会实现下载文件的功能。
    如果我们不希望创建多余的元素，而是直接点击按钮就能实现下载，此时又该怎么实现呢？
  -->
  </style>
  <script>
    window.onload = function() {
      var oTxt = document.getElementById("txt");
      var oBtn = document.getElementById("btn");
      var oDiv = document.getElementById("container");
      oBtn.onclick = function() {
        var text = oTxt.value;
        var blob = new Blob([text], {type: "text/plain"});
        var oA = document.createElement("a");
        var url = window.URL.createObjectURL(blob);
        oA.download = "download";
        oA.href = url;
        // 添加元素
        document.body.appendChild(oA);
        // 触发点击
        oA.click();
        // 移除元素
        document.body.removeChild(oA);
      };
    }
  </script>
</head>
<body>
  <textarea id="txt" cols="30" rows="10"></textarea><br />
  <input id="btn" type="button" value="下载文件" />
</body>
</html>
